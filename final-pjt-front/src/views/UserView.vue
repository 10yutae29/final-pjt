<template>
  <div>
    <div id="user">
      <div id="user-block">
        <h1>유저 정보</h1>
        <p>{{ user_detail?.username }}</p>
        <button @click="goChangePassword">비밀번호 변경</button>

        <div>
          <LikeMovieList
          :liked_movies="user_detail.liked_movies"
          />
        </div>

        <div>
          <UserCommentList
          :comments="user_detail.comment_set"
          />
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import UserCommentList from '@/components/UserCommentList'
import LikeMovieList from '@/components/LikeMovieList'

export default {
  components:{
    UserCommentList,
    LikeMovieList
  },
  name: 'UserView',
  data() {
    return {
    }
  },
  computed: {
    user() {
      return this.$store.state.user_info
    },
    user_detail() {
      return this.$store.state.user_detail
    }
  },
  methods: {  
    goChangePassword() {
      this.$router.push('/passwordchangeview/')
    },
    getUserInfo() {
      console.log(this.user)
      this.$store.dispatch('getUserInfo', this.user.pk)
    }
  },
  created() {
    this.getUserInfo()
  }
}
</script>

<style>
#user{
  justify-content: center;
  padding: 20px 20px 20px 20px;
}
#user-block{
  background: rgb(150, 243, 255);
  border-radius: 5px;
  border: solid rgb(6, 8, 66);
  position: relative;
  /* display: inline; */
  width: 100%;
}
</style>